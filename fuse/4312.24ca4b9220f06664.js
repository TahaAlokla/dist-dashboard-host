"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4312],{9096:(P,g,t)=>{t.d(g,{D:()=>u});var r=t(3144),i=t(5787),s=t(2340),h=t(1135),o=t(4004),c=t(8505),p=t(2223);let u=(()=>{class d{constructor(e){this._httpClient=e,this._tickets=new h.X(null),this._All_tickets=new h.X(null),this._ticketById=new h.X(null),this._pagination=new h.X({pageIndex:0,pageSize:10,length:0})}get pagination$(){return this._pagination.asObservable()}get tickets$(){return this._tickets.asObservable()}get all_tickets$(){return this._All_tickets.asObservable()}get ticketById$(){return this._ticketById.asObservable()}updatePagination$(e){console.log("updatePagination",e),this._pagination.next(e)}getTickets(e=0,a=10,n){console.log("search",n);let l=e+1,C=s.N.API_ENDPOINT+i.b.TICKETS.all_tickets,E=(new r.LE).set("page",l).set("limit",a);return n&&(E=E.append("search",n)),this._httpClient.get(`${C}`,{params:E}).pipe((0,o.U)(T=>{if(T.success){const I=T.data;return this._tickets.next(I),this._pagination.next({length:T.page_info.count,pageIndex:e,pageSize:a}),I}}))}getAllTickets(e){let a=s.N.API_ENDPOINT+i.b.TICKETS.all_tickets,n=(new r.LE).set("page",-1);return e&&(n=n.append("search",e)),this._httpClient.get(`${a}`,{params:n}).pipe((0,o.U)(l=>{if(l.success){const C=l.data;return this._All_tickets.next(C),C}}))}getTicketById(e){return this._httpClient.get(`${s.N.API_ENDPOINT+i.b.TICKETS.get_ticket}/${e}`).pipe((0,o.U)(n=>{if(200==n.code){const l=n.data;return this._ticketById.next(l),l}}))}update_ticket_closed_ticket(e){return this._httpClient.put(`${s.N.API_ENDPOINT+i.b.TICKETS.update_ticket}/${e}`,{status:"closed"}).pipe((0,o.U)(n=>{if(200==n.code)return n.data}))}delete_ticket(e){return this._httpClient.delete(`${s.N.API_ENDPOINT+i.b.TICKETS.delete_ticket}/${e}`).pipe((0,c.b)(()=>this._ticketById.next(null)))}create_admin_reply(e){return this._httpClient.post(`${s.N.API_ENDPOINT+i.b.TICKETS.create_admin_reply}`,{...e}).pipe((0,o.U)(n=>{if(200==n.code)return n.data[0]}))}}return d.\u0275fac=function(e){return new(e||d)(p.LFG(r.eN))},d.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},4312:(P,g,t)=>{t.r(g),t.d(g,{default:()=>o});var r=t(1531),i=t(2223);let s=(()=>{class c{}return c.\u0275fac=function(u){return new(u||c)},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-ticket-container"]],standalone:!0,features:[i.jDz],decls:2,vars:0,consts:[[1,"w-full","h-full","min-h-max","max-h-max"]],template:function(u,d){1&u&&(i.TgZ(0,"div",0),i._UZ(1,"router-outlet"),i.qZA())},dependencies:[r.lC],styles:["app-ticket-container[_ngcontent-%COMP%]{display:flex;height:-moz-fit-content;height:fit-content;max-height:100vh;min-height:100vh;flex-direction:column}"]}),c})();var h=t(9096);const o=[{path:"",component:s,children:[{path:"",loadChildren:()=>Promise.all([t.e(9401),t.e(9609),t.e(787),t.e(3627),t.e(8531),t.e(9222),t.e(4518)]).then(t.bind(t,4518))},{path:"ticket",resolve:{tickets:()=>(0,i.f3M)(h.D).getAllTickets()},loadChildren:()=>Promise.all([t.e(9401),t.e(9609),t.e(5226),t.e(7779)]).then(t.bind(t,7779))}]}]}}]);